{"ast":null,"code":"var _jsxFileName = \"/workspaces/file-uploader-viewing-mode-is-under-process-/FileFlow/frontend/src/context/FileContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useContext, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FileContext = /*#__PURE__*/createContext();\nexport const useFiles = () => {\n  _s();\n  const context = useContext(FileContext);\n  if (!context) {\n    throw new Error('useFiles must be used within FileProvider');\n  }\n  return context;\n};\n_s(useFiles, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const FileProvider = ({\n  children\n}) => {\n  _s2();\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [currentFolderId, setCurrentFolderId] = useState(null);\n  const [clipboard, setClipboard] = useState({\n    files: [],\n    operation: null\n  }); // cut or copy\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const fetchFiles = async (folderId = null) => {\n    setLoading(true);\n    try {\n      const url = folderId ? `/api/folder/${folderId}` : '/api/files';\n      const response = await axios.get(url);\n      setFiles(response.data);\n      setCurrentFolderId(folderId);\n\n      // Update history\n      const newHistory = history.slice(0, historyIndex + 1);\n      newHistory.push(folderId);\n      setHistory(newHistory);\n      setHistoryIndex(newHistory.length - 1);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const goBack = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      fetchFiles(history[newIndex]);\n    }\n  };\n  const goForward = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      fetchFiles(history[newIndex]);\n    }\n  };\n  const uploadFile = async (file, folderId = null) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    if (folderId) formData.append('folder_id', folderId);\n    try {\n      await axios.post('/api/upload', formData);\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n    }\n  };\n  const createFolder = async name => {\n    try {\n      await axios.post('/api/create_folder', {\n        folder_name: name,\n        parent_folder_id: currentFolderId\n      });\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error creating folder:', error);\n    }\n  };\n  const deleteFiles = async fileIds => {\n    try {\n      await Promise.all(fileIds.map(id => axios.delete(`/api/delete_file/${id}`)));\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error deleting files:', error);\n    }\n  };\n  const renameFile = async (fileId, newName) => {\n    try {\n      await axios.post(`/api/rename_file/${fileId}`, {\n        new_name: newName\n      });\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error renaming file:', error);\n    }\n  };\n  const moveFiles = async (fileIds, destinationFolderId) => {\n    try {\n      await Promise.all(fileIds.map(id => axios.post(`/api/move_file/${id}`, {\n        destination_folder_id: destinationFolderId\n      })));\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error moving files:', error);\n    }\n  };\n  const copyToClipboard = fileIds => {\n    setClipboard({\n      files: fileIds,\n      operation: 'copy'\n    });\n  };\n  const cutToClipboard = fileIds => {\n    setClipboard({\n      files: fileIds,\n      operation: 'cut'\n    });\n  };\n  const pasteFromClipboard = async () => {\n    if (clipboard.operation === 'move' || clipboard.operation === 'cut') {\n      await moveFiles(clipboard.files, currentFolderId);\n    }\n    // TODO: Implement copy operation\n    setClipboard({\n      files: [],\n      operation: null\n    });\n  };\n  useEffect(() => {\n    fetchFiles();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return /*#__PURE__*/_jsxDEV(FileContext.Provider, {\n    value: {\n      files,\n      loading,\n      currentFolderId,\n      clipboard,\n      history,\n      historyIndex,\n      fetchFiles,\n      goBack,\n      goForward,\n      uploadFile,\n      createFolder,\n      deleteFiles,\n      renameFile,\n      moveFiles,\n      copyToClipboard,\n      cutToClipboard,\n      pasteFromClipboard\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 134,\n    columnNumber: 5\n  }, this);\n};\n_s2(FileProvider, \"/zo56b479+JUw090hc7yQI0LWuw=\");\n_c = FileProvider;\nvar _c;\n$RefreshReg$(_c, \"FileProvider\");","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","axios","jsxDEV","_jsxDEV","FileContext","useFiles","_s","context","Error","FileProvider","children","_s2","files","setFiles","loading","setLoading","currentFolderId","setCurrentFolderId","clipboard","setClipboard","operation","history","setHistory","historyIndex","setHistoryIndex","fetchFiles","folderId","url","response","get","data","newHistory","slice","push","length","error","console","goBack","newIndex","goForward","uploadFile","file","formData","FormData","append","post","createFolder","name","folder_name","parent_folder_id","deleteFiles","fileIds","Promise","all","map","id","delete","renameFile","fileId","newName","new_name","moveFiles","destinationFolderId","destination_folder_id","copyToClipboard","cutToClipboard","pasteFromClipboard","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/workspaces/file-uploader-viewing-mode-is-under-process-/FileFlow/frontend/src/context/FileContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport axios from 'axios';\n\nconst FileContext = createContext();\n\nexport const useFiles = () => {\n  const context = useContext(FileContext);\n  if (!context) {\n    throw new Error('useFiles must be used within FileProvider');\n  }\n  return context;\n};\n\nexport const FileProvider = ({ children }) => {\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [currentFolderId, setCurrentFolderId] = useState(null);\n  const [clipboard, setClipboard] = useState({ files: [], operation: null }); // cut or copy\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  \n  const fetchFiles = async (folderId = null) => {\n    setLoading(true);\n    try {\n      const url = folderId ? `/api/folder/${folderId}` : '/api/files';\n      const response = await axios.get(url);\n      setFiles(response.data);\n      setCurrentFolderId(folderId);\n      \n      // Update history\n      const newHistory = history.slice(0, historyIndex + 1);\n      newHistory.push(folderId);\n      setHistory(newHistory);\n      setHistoryIndex(newHistory.length - 1);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const goBack = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      fetchFiles(history[newIndex]);\n    }\n  };\n  \n  const goForward = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      fetchFiles(history[newIndex]);\n    }\n  };\n  \n  const uploadFile = async (file, folderId = null) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    if (folderId) formData.append('folder_id', folderId);\n    \n    try {\n      await axios.post('/api/upload', formData);\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n    }\n  };\n  \n  const createFolder = async (name) => {\n    try {\n      await axios.post('/api/create_folder', {\n        folder_name: name,\n        parent_folder_id: currentFolderId\n      });\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error creating folder:', error);\n    }\n  };\n  \n  const deleteFiles = async (fileIds) => {\n    try {\n      await Promise.all(fileIds.map(id => axios.delete(`/api/delete_file/${id}`)));\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error deleting files:', error);\n    }\n  };\n  \n  const renameFile = async (fileId, newName) => {\n    try {\n      await axios.post(`/api/rename_file/${fileId}`, { new_name: newName });\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error renaming file:', error);\n    }\n  };\n  \n  const moveFiles = async (fileIds, destinationFolderId) => {\n    try {\n      await Promise.all(fileIds.map(id => \n        axios.post(`/api/move_file/${id}`, { destination_folder_id: destinationFolderId })\n      ));\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error moving files:', error);\n    }\n  };\n  \n  const copyToClipboard = (fileIds) => {\n    setClipboard({ files: fileIds, operation: 'copy' });\n  };\n  \n  const cutToClipboard = (fileIds) => {\n    setClipboard({ files: fileIds, operation: 'cut' });\n  };\n  \n  const pasteFromClipboard = async () => {\n    if (clipboard.operation === 'move' || clipboard.operation === 'cut') {\n      await moveFiles(clipboard.files, currentFolderId);\n    }\n    // TODO: Implement copy operation\n    setClipboard({ files: [], operation: null });\n  };\n  \n  useEffect(() => {\n    fetchFiles();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  \n  return (\n    <FileContext.Provider value={{\n      files,\n      loading,\n      currentFolderId,\n      clipboard,\n      history,\n      historyIndex,\n      fetchFiles,\n      goBack,\n      goForward,\n      uploadFile,\n      createFolder,\n      deleteFiles,\n      renameFile,\n      moveFiles,\n      copyToClipboard,\n      cutToClipboard,\n      pasteFromClipboard\n    }}>\n      {children}\n    </FileContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}