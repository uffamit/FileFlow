{"ast":null,"code":"import React,{createContext,useState,useContext,useEffect}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";const FileContext=/*#__PURE__*/createContext();export const useFiles=()=>{const context=useContext(FileContext);if(!context){throw new Error('useFiles must be used within FileProvider');}return context;};export const FileProvider=_ref=>{let{children}=_ref;const[files,setFiles]=useState([]);const[loading,setLoading]=useState(false);const[currentFolderId,setCurrentFolderId]=useState(null);const[clipboard,setClipboard]=useState({files:[],operation:null});// cut or copy\nconst[history,setHistory]=useState([]);const[historyIndex,setHistoryIndex]=useState(-1);const fetchFiles=async function(){let folderId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setLoading(true);try{const url=folderId?\"/api/folder/\".concat(folderId):'/api/files';const response=await axios.get(url);setFiles(response.data);setCurrentFolderId(folderId);// Update history\nconst newHistory=history.slice(0,historyIndex+1);newHistory.push(folderId);setHistory(newHistory);setHistoryIndex(newHistory.length-1);}catch(error){console.error('Error fetching files:',error);}finally{setLoading(false);}};const goBack=()=>{if(historyIndex>0){const newIndex=historyIndex-1;setHistoryIndex(newIndex);fetchFiles(history[newIndex]);}};const goForward=()=>{if(historyIndex<history.length-1){const newIndex=historyIndex+1;setHistoryIndex(newIndex);fetchFiles(history[newIndex]);}};const uploadFile=async function(file){let folderId=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const formData=new FormData();formData.append('file',file);if(folderId)formData.append('folder_id',folderId);try{await axios.post('/api/upload',formData);fetchFiles(currentFolderId);}catch(error){console.error('Error uploading file:',error);}};const createFolder=async name=>{try{await axios.post('/api/create_folder',{folder_name:name,parent_folder_id:currentFolderId});fetchFiles(currentFolderId);}catch(error){console.error('Error creating folder:',error);}};const deleteFiles=async fileIds=>{try{await Promise.all(fileIds.map(id=>axios.delete(\"/api/delete_file/\".concat(id))));fetchFiles(currentFolderId);}catch(error){console.error('Error deleting files:',error);}};const renameFile=async(fileId,newName)=>{try{await axios.post(\"/api/rename_file/\".concat(fileId),{new_name:newName});fetchFiles(currentFolderId);}catch(error){console.error('Error renaming file:',error);}};const moveFiles=async(fileIds,destinationFolderId)=>{try{await Promise.all(fileIds.map(id=>axios.post(\"/api/move_file/\".concat(id),{destination_folder_id:destinationFolderId})));fetchFiles(currentFolderId);}catch(error){console.error('Error moving files:',error);}};const copyToClipboard=fileIds=>{setClipboard({files:fileIds,operation:'copy'});};const cutToClipboard=fileIds=>{setClipboard({files:fileIds,operation:'cut'});};const pasteFromClipboard=async()=>{if(clipboard.operation==='move'||clipboard.operation==='cut'){await moveFiles(clipboard.files,currentFolderId);}// TODO: Implement copy operation\nsetClipboard({files:[],operation:null});};useEffect(()=>{fetchFiles();},[]);return/*#__PURE__*/_jsx(FileContext.Provider,{value:{files,loading,currentFolderId,clipboard,history,historyIndex,fetchFiles,goBack,goForward,uploadFile,createFolder,deleteFiles,renameFile,moveFiles,copyToClipboard,cutToClipboard,pasteFromClipboard},children:children});};","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","axios","jsx","_jsx","FileContext","useFiles","context","Error","FileProvider","_ref","children","files","setFiles","loading","setLoading","currentFolderId","setCurrentFolderId","clipboard","setClipboard","operation","history","setHistory","historyIndex","setHistoryIndex","fetchFiles","folderId","arguments","length","undefined","url","concat","response","get","data","newHistory","slice","push","error","console","goBack","newIndex","goForward","uploadFile","file","formData","FormData","append","post","createFolder","name","folder_name","parent_folder_id","deleteFiles","fileIds","Promise","all","map","id","delete","renameFile","fileId","newName","new_name","moveFiles","destinationFolderId","destination_folder_id","copyToClipboard","cutToClipboard","pasteFromClipboard","Provider","value"],"sources":["/workspaces/file-uploader-viewing-mode-is-under-process-/FileFlow/frontend/src/context/FileContext.js"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport axios from 'axios';\n\nconst FileContext = createContext();\n\nexport const useFiles = () => {\n  const context = useContext(FileContext);\n  if (!context) {\n    throw new Error('useFiles must be used within FileProvider');\n  }\n  return context;\n};\n\nexport const FileProvider = ({ children }) => {\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [currentFolderId, setCurrentFolderId] = useState(null);\n  const [clipboard, setClipboard] = useState({ files: [], operation: null }); // cut or copy\n  const [history, setHistory] = useState([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  \n  const fetchFiles = async (folderId = null) => {\n    setLoading(true);\n    try {\n      const url = folderId ? `/api/folder/${folderId}` : '/api/files';\n      const response = await axios.get(url);\n      setFiles(response.data);\n      setCurrentFolderId(folderId);\n      \n      // Update history\n      const newHistory = history.slice(0, historyIndex + 1);\n      newHistory.push(folderId);\n      setHistory(newHistory);\n      setHistoryIndex(newHistory.length - 1);\n    } catch (error) {\n      console.error('Error fetching files:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const goBack = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      fetchFiles(history[newIndex]);\n    }\n  };\n  \n  const goForward = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      fetchFiles(history[newIndex]);\n    }\n  };\n  \n  const uploadFile = async (file, folderId = null) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    if (folderId) formData.append('folder_id', folderId);\n    \n    try {\n      await axios.post('/api/upload', formData);\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error uploading file:', error);\n    }\n  };\n  \n  const createFolder = async (name) => {\n    try {\n      await axios.post('/api/create_folder', {\n        folder_name: name,\n        parent_folder_id: currentFolderId\n      });\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error creating folder:', error);\n    }\n  };\n  \n  const deleteFiles = async (fileIds) => {\n    try {\n      await Promise.all(fileIds.map(id => axios.delete(`/api/delete_file/${id}`)));\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error deleting files:', error);\n    }\n  };\n  \n  const renameFile = async (fileId, newName) => {\n    try {\n      await axios.post(`/api/rename_file/${fileId}`, { new_name: newName });\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error renaming file:', error);\n    }\n  };\n  \n  const moveFiles = async (fileIds, destinationFolderId) => {\n    try {\n      await Promise.all(fileIds.map(id => \n        axios.post(`/api/move_file/${id}`, { destination_folder_id: destinationFolderId })\n      ));\n      fetchFiles(currentFolderId);\n    } catch (error) {\n      console.error('Error moving files:', error);\n    }\n  };\n  \n  const copyToClipboard = (fileIds) => {\n    setClipboard({ files: fileIds, operation: 'copy' });\n  };\n  \n  const cutToClipboard = (fileIds) => {\n    setClipboard({ files: fileIds, operation: 'cut' });\n  };\n  \n  const pasteFromClipboard = async () => {\n    if (clipboard.operation === 'move' || clipboard.operation === 'cut') {\n      await moveFiles(clipboard.files, currentFolderId);\n    }\n    // TODO: Implement copy operation\n    setClipboard({ files: [], operation: null });\n  };\n  \n  useEffect(() => {\n    fetchFiles();\n  }, []);\n  \n  return (\n    <FileContext.Provider value={{\n      files,\n      loading,\n      currentFolderId,\n      clipboard,\n      history,\n      historyIndex,\n      fetchFiles,\n      goBack,\n      goForward,\n      uploadFile,\n      createFolder,\n      deleteFiles,\n      renameFile,\n      moveFiles,\n      copyToClipboard,\n      cutToClipboard,\n      pasteFromClipboard\n    }}>\n      {children}\n    </FileContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}